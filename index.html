<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BRICK BREAKER</title>
<style>
  html,body{height:100%;margin:0;background:#0b132b;color:#fff;font-family:Arial,Helvetica,sans-serif}
  #startScreen, #endScreen {
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:20;
    background: rgba(0,0,0,0.75); flex-direction:column;
  }
  #startScreen.hidden, #endScreen.hidden { display:none; }
  #startScreen h1 { margin:0 0 12px; font-size:32px; color:#00ffd1; text-shadow:0 0 12px rgba(0,255,209,0.14); }
  #startScreen input { padding:10px 14px; font-size:16px; border-radius:8px; border:2px solid rgba(0,255,209,0.18); background:#021026; color:#00ffd1; outline:none; width:80%; max-width:320px; text-align:center; }
  #startScreen button, #endScreen button { margin-top:12px; padding:10px 18px; background:#00ffd1; color:#001; border:none; border-radius:10px; cursor:pointer; font-weight:700; }
  #gameCanvas { display:block; margin:0 auto; background: linear-gradient(180deg,#001f3f,#001027); touch-action:none; width:100vw; height:100vh; }
  #hud { position:fixed; top:8px; left:10px; right:10px; display:flex; justify-content:space-between; pointer-events:none; color:#fff; z-index:10; font-weight:600; text-shadow:0 0 6px rgba(0,0,0,0.4); }
</style>
</head>
<body>

<div id="startScreen">
  <h1>BRICK BREAKER</h1>
  <input id="playerName" placeholder="Enter your name" maxlength="20" />
  <button id="startBtn">Start Game</button>
  <div style="margin-top:8px;color:#cfefff;font-size:13px;">Touch to move on mobile â€¢ Arrow keys / Mouse on desktop</div>
</div>

<div id="endScreen" class="hidden">
  <h1 id="endTitle">GAME OVER</h1>
  <div id="endText" style="margin-top:8px;color:#fff"></div>
  <button id="playAgainBtn">Play Again</button>
</div>

<div id="hud">
  <div id="leftHud"></div>
  <div id="rightHud"></div>
</div>

<canvas id="gameCanvas"></canvas>

<!-- ðŸ”¥ Full Game Script Starts -->
<script>
// ---------- FORM SETTINGS ----------
const FORM_POST_URL = "https://docs.google.com/forms/d/e/1FAIpQLSdu8u7Hy6Vk3AWynS7XsjlxLH4N39WGwNq3xJdH2Aq_ur89pg/formResponse";
const ENTRY_PLAYER = "entry.894304293";
const ENTRY_SCORE = "entry.1709694859";

// ---------- FORM SUBMIT ----------
function submitToGoogleForm(name, scoreValue){
  try {
    const fd = new FormData();
    fd.append(ENTRY_PLAYER, name);
    fd.append(ENTRY_SCORE, String(scoreValue));
    fetch(FORM_POST_URL, { method:'POST', mode:'no-cors', body: fd });
  } catch(e){
    console.warn('submitToGoogleForm error', e);
  }
}

// ---------- GAME ----------
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let W = window.innerWidth, H = window.innerHeight;
function resize(){ W=window.innerWidth; H=window.innerHeight; canvas.width=W; canvas.height=H; }
window.addEventListener('resize', resize);
resize();

const leftHud=document.getElementById('leftHud');
const rightHud=document.getElementById('rightHud');
const startScreen=document.getElementById('startScreen');
const startBtn=document.getElementById('startBtn');
const playerNameInput=document.getElementById('playerName');
const endScreen=document.getElementById('endScreen');
const endTitle=document.getElementById('endTitle');
const endText=document.getElementById('endText');
const playAgainBtn=document.getElementById('playAgainBtn');

let playerName="Player";
let score=0, lives=3;
let paddle={w:Math.max(80,W*0.18),h:12,x:(W/2),y:0,speed:10};
let ball={x:0,y:0,r:10,dx:4,dy:-4};
let bricks=[],brickRows=5,brickCols=8,brickW,brickH,brickGap=8,brickTop=80;
let running=false, playing=false, pointerActive=false;

function initLayout(){
  paddle.w=Math.max(80,W*0.18);
  paddle.y=H-paddle.h-28;
  paddle.x=(W-paddle.w)/2;
  ball.r=Math.max(7,Math.min(12,W*0.012));
  ball.x=W/2; ball.y=paddle.y-ball.r-6;
  ball.dx=Math.max(3,W*0.005)*(Math.random()>0.5?1:-1);
  ball.dy=-Math.max(3,W*0.005);
  brickW=Math.max(36,(W-60-(brickCols-1)*brickGap)/brickCols);
  brickH=Math.max(16,18);
  createBricks();
  updateHUD();
}
function createBricks(){
  bricks=[];
  for(let c=0;c<brickCols;c++){
    for(let r=0;r<brickRows;r++){
      const x=30+c*(brickW+brickGap);
      const y=brickTop+r*(brickH+brickGap);
      bricks.push({x,y,w:brickW,h:brickH,hit:false,color:`hsl(${(r*brickCols+c)*12%360},80%,60%)`});
    }
  }
}
function updateHUD(){
  leftHud.textContent=`Player: ${playerName}`;
  rightHud.textContent=`Score: ${score}   Lives: ${lives}`;
}
function roundRect(ctx,x,y,w,h,r){
  ctx.beginPath();
  ctx.moveTo(x+r,y);
  ctx.arcTo(x+w,y,x+w,y+h,r);
  ctx.arcTo(x+w,y+h,x,y+h,r);
  ctx.arcTo(x,y+h,x,y,r);
  ctx.arcTo(x,y,x+w,y,r);
  ctx.closePath(); ctx.fill();
}
function drawPaddle(){ ctx.fillStyle="#00b7ff"; roundRect(ctx,paddle.x,paddle.y,paddle.w,paddle.h,6); }
function drawBall(){
  const g=ctx.createRadialGradient(ball.x,ball.y,ball.r*0.2,ball.x,ball.y,ball.r);
  g.addColorStop(0,'#fff'); g.addColorStop(1,'#66fff0');
  ctx.fillStyle=g;
  ctx.beginPath(); ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2); ctx.fill();
}
function drawBricks(){
  for(const b of bricks){
    if(!b.hit){ ctx.fillStyle=b.color; roundRect(ctx,b.x,b.y,b.w,b.h,4); }
  }
}
function detectBricks(){
  for(const b of bricks){
    if(!b.hit && ball.x+ball.r>b.x && ball.x-ball.r<b.x+b.w && ball.y+ball.r>b.y && ball.y-ball.r<b.y+b.h){
      b.hit=true; ball.dy=-ball.dy; score+=10; updateHUD();
      ball.dx*=1.01; ball.dy*=1.01;
      if(bricks.every(x=>x.hit)) gameEnd(true);
      return;
    }
  }
}
function updatePhysics(){
  if(!playing)return;
  ball.x+=ball.dx; ball.y+=ball.dy;
  if(ball.x-ball.r<0){ball.x=ball.r;ball.dx=-ball.dx;}
  if(ball.x+ball.r>W){ball.x=W-ball.r;ball.dx=-ball.dx;}
  if(ball.y-ball.r<0){ball.y=ball.r;ball.dy=-ball.dy;}
  if(ball.y+ball.r>paddle.y && ball.y-ball.r<paddle.y+paddle.h && ball.x>paddle.x && ball.x<paddle.x+paddle.w && ball.dy>0){
    ball.dy=-Math.abs(ball.dy);
    const hitPos=(ball.x-(paddle.x+paddle.w/2))/(paddle.w/2);
    ball.dx=hitPos*Math.max(5,W*0.01);
  }
  if(ball.y-ball.r>H){
    lives--; updateHUD();
    if(lives<=0){ gameEnd(false); }
    else{
      paddle.x=(W-paddle.w)/2;
      ball.x=W/2; ball.y=paddle.y-ball.r-6;
      ball.dx=Math.max(3,W*0.005)*(Math.random()>0.5?1:-1);
      ball.dy=-Math.max(3,W*0.005);
    }
  }
  detectBricks();
}
function render(){
  ctx.clearRect(0,0,W,H);
  drawBricks(); drawBall(); drawPaddle();
}
function loop(){
  updatePhysics(); render();
  if(running) requestAnimationFrame(loop);
}
canvas.addEventListener('pointerdown',e=>{pointerActive=true;movePaddleTo(e);if(!playing&&running)playing=true;});
canvas.addEventListener('pointermove',e=>{if(pointerActive)movePaddleTo(e);});
canvas.addEventListener('pointerup',()=>{pointerActive=false;});
function movePaddleTo(e){
  const rect=canvas.getBoundingClientRect();
  let x=e.clientX-rect.left;
  paddle.x=Math.max(0,Math.min(W-paddle.w,x-paddle.w/2));
}
window.addEventListener('keydown',e=>{
  if(e.key==='ArrowLeft')paddle.x-=paddle.speed;
  if(e.key==='ArrowRight')paddle.x+=paddle.speed;
  if((e.key===' '||e.key==='Enter')&&running&&!playing)playing=true;
});

// ---- GAME CONTROL ----
function startGame(){
  const val=playerNameInput.value.trim();
  if(!val){ alert('Please enter your name'); return; }
  playerName=val;
  submitToGoogleForm(playerName,0); // record start
  startScreen.classList.add('hidden');
  running=true; playing=true; score=0; lives=3;
  initLayout(); updateHUD(); loop();
}
function gameEnd(won){
  running=false; playing=false;
  endTitle.textContent=won?'YOU WIN!':'GAME OVER';
  endText.textContent=`Final Score: ${score}`;
  endScreen.classList.remove('hidden');
  submitToGoogleForm(playerName,score); // record final score
}
function restartGame(){
  endScreen.classList.add('hidden');
  startScreen.classList.remove('hidden');
  playerNameInput.value=playerName;
}
startBtn.addEventListener('click',startGame);
playAgainBtn.addEventListener('click',restartGame);
initLayout(); updateHUD();
</script>
<!-- ðŸ”¥ Script Ends -->

</body>
</html>
